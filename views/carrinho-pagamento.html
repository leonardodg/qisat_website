<form name="pagamentoForm" id="pagamentoForm" novalidate>

    <div class="widget_content" ng-if="!buy.transacao" >
      <p class="title">Forma de pagamento</p>
      <table width="100%" class="table-cart tablePagamento">
        <tr>
          <th>Termos de contrato</th>
          <td>
            <label>
              <input id="contrato" name="contrato" type="checkbox" ng-required="true" ng-model="vm.contrato" > <a ng-click="vm.modalcontrato()">Eu aceito termos do CONTRATO ON-LINE DE PRESTAÇÃO DE SERVIÇOS</a>

              <div ng-show="vm.submitted && pagamentoForm.contrato.$invalid">
                  <span class="error" ng-show="pagamentoForm.contrato.$error.required">Favor ler e aceitar o Contrato.</span>
              </div>

            </label>
          </td>
        </tr>
        <tr>
          <th>Selecione a Forma de Pagamento  </th>
          <td>
            <div class="row">
              <div ng-repeat="forma in vm.formasPagamentos" ng-class="{'medium-3 small-12 columns end' : forma.pagamento =='Boleto', 'medium-7 small-12 columns' : forma.pagamento =='Cartão de Crédito'}">
                <p>{{forma.pagamento}}</p>
                <ul class="inline-list">
                  <li ng-repeat="operadora in forma.operadoras">
                    <label><input id="pagamento" name="pagamento" type="radio" ng-model="vm.pagamento" value="{{operadora.index}}" ng-required="true" > <img ng-src="{{operadora.img.src}}" alt="{{operadora.img.nome}}" ></label>
                  </li>
                </ul>
              </div>
            </div>
          </td>
        </tr>
        <tr ng-hide="vm.pagamento==4">
          <th>Selecione o valor das parcelas</th>
          <td>
           <select ng-options="parcela as parcela.label for parcela in vm.parcelas track by parcela.qtd"  ng-model="vm.nparcelas">
            </select>
          </td>
        </tr>
        <tr ng-show="vm.loading" >
          <td colspan="5" class="text-center"> 
            <div class="custom-loading" >
              <i class="material-icons">hdr_weak</i>
              <span class="text" >Atualizando</span>
            </div>
          </td>
      </tr>
      </table>
    </div>

<div class="widget_content" ng-if="vm.redirect">
  <p class="title">Realizar Pagamento</p>

  <table width="100%" class="table-cart">
    <tr>
      <td><i class="material-icons">launch</i></td>
      <td>Para efetuar o pagamento e finalizar sua compra, você será redirecionado para uma página segura de pagamento onde deve informar os dados do seu cartão!</td>
    </tr>

    <tr class="text-center">
      <td colspan="2">
        <div class="row">
            <div class="small-6 small-centered columns">   

                <span>Clique em Finalizar Pagamento ou Aguarde!</span> <br>
           
                <timer countdown="1000" interval="1000" >
                  <span ng-show="seconds"> Redirecionamento Automático em: {{sseconds}} Segundo{{secondsS}}. </span>
                </timer>
    
            </div>
        </div>
      </td>
    </tr>
  </table>

  <div class="row">
    <div class="small-12 large-3 large-centered columns">        
        <a ng-href="{{vm.redirect}}" class="button success text-center" analytics-on analytics-event="carrinho finalizar cartao" >Finalizar Pagamento</a>
    </div>
  </div>


</div>

<div class="row" ng-if="!vm.redirect && !buy.transacao">
  <div class="small-6 medium-6 large-6 columns">
    <a href="/carrinho" class="button secondary" ng-hide="vm.loading"><i class="material-icons">keyboard_arrow_left</i> Voltar</a>
  </div>
  <div class="small-6 medium-6 large-6 columns">
      <button id="salve" type="submit" class="button success right" ng-click="vm.nextPagamento(pagamentoForm)" ng-hide="vm.loading" analytics-on analytics-event="carrinho comprar">Realizar Compra <i class="material-icons">keyboard_arrow_right</i></button>
  </div>
</div>


<!-- HTML COPY PAGE CARRINHO-PAGAMENTO.HTML AND CARRINHO-MONTAR.HTML -->
<div class="widget_content text-center" ng-if="buy.transacao">
        <p class="title">Pagamento não Finalizado!</p>

        <div class="row">
            <div class="small-12 large-6 large-centered columns text-center">  
                <span class="error">Sua compra possui uma transação não finalizada, favor conclua o pagamento  ou selecione outra forma de pagamento.</span><br>
            </div>
        </div>

        <div class="row">
            <div class="small-12 large-6 large-centered columns text-center">  
                <p> Forma de Pagamento: <strong> {{buy.transacao.forma_pagamento}} </strong> <br>
                    Operadora: <strong>{{buy.transacao.operadora}}</strong> <br>
                    Parcelas : <strong>{{buy.transacao.parcelas}}</strong>
                </p>
            </div>
        </div>

        <div class="row">
            <div class="small-11 large-4 large-centered small-centered  columns texte-center">  
                  <button class="button" ng-click="vm.cancelTransacao()" analytics-on analytics-event="carrinho cancel" >Alterar</button>
                  <a ng-href="{{buy.transacao.url}}" class="button success" analytics-on analytics-event="carrinho pagar transacao">Finalizar</a>
            </div>
        </div>
</div>

</form>